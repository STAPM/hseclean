<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Process data on individual socioeconomic, demographic and health characteristics • hseclean</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Process data on individual socioeconomic, demographic and health characteristics">
<meta property="og:description" content="hseclean">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">hseclean</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/alcohol_data.html">Process data on alcohol consumption</a>
    </li>
    <li>
      <a href="../articles/covariate_data.html">Process data on individual socioeconomic, demographic and health characteristics</a>
    </li>
    <li>
      <a href="../articles/missing_data.html">Imputation of missing data</a>
    </li>
    <li>
      <a href="../articles/scottish_data.html">Addition of Scottish data</a>
    </li>
    <li>
      <a href="../articles/smoking_data.html">Process data on tobacco smoking</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Process data on individual socioeconomic, demographic and health characteristics</h1>
            
      
      
      <div class="hidden name"><code>covariate_data.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h1>
<p>The Health Survey for England (HSE) is a series of annual surveys covering health and health-related behaviours. For the Sheffield Tobacco Policy Model (STPM) we use data from years 2001 to the latest available. Our upper age limit is 89 years, but otherwise we make use of all ages and incorporate all booster samples (e.g. in 2004 there was an ethnicity booster sample).</p>
<p>One important thing to note is that the suppliers of the HSE data introduced tighter information governance rules in 2015, which meant that they stopped providing variables that could be used to identify the age in single years of an individual, and also stopped providing information on number of children in the household. These variables can still be obtained, but only after applying for the secure-access version of the data, which we do not do. Therefore, in our processing of the standard-access version of the data, we use imputation methods to overcome the added restrictions.</p>
<p><code>hseclean</code> is a collection of functions to read and process the HSE data into a suitable form for use in our modelling. Here we describe how we use it to clean and calculate the covariates used in our analyses.</p>
</div>
<div id="survey-design-variables" class="section level1">
<h1 class="hasAnchor">
<a href="#survey-design-variables" class="anchor"></a>Survey design variables</h1>
<p>The first thing to consider is the influence of survey sampling design, which is variable among years. The variables that describe the sampling structure are <code>cluster</code> and <code>PSU</code> (probabilistic sampling unit).</p>
<p>In most years there are also survey weights, which are calculated after the survey data has been collected, that when applied are supposed to make the survey sample representative of the general population e.g. if a particular subgroup has been under-sampled, then it receives a higher survey weight. As I understand it, the survey weights supplied with the data consider only the age and sex distribution of the population, and do not consider the distribution of socio-economic or health characteristics. The definition and structure of the survey weights provided with the data tends to vary between years, and is described in the dataset documentation for each year of data. For example, some key changes</p>
<ul>
<li>For 2001, there were not survey weights for adults but there were for children (to correct for the sampling design that not all children in the household being surveyed).<br>
</li>
<li>For 2002, there were different weights for children, young adults (&lt; 25 years) and older adults. These weights again were just to correct for the sampling design.<br>
</li>
<li>In 2003, non-response weighting was introduced to the HSE data for children and adults.<br>
</li>
<li>Thereafter, weights made the additional corrections for the various boost samples in each year.</li>
</ul>
<p><code>hseclean</code> contains separate functions for reading the survey data for each year, e.g. <code><a href="../reference/read_2001.html">read_2001()</a></code>, and a description of the survey weights has been added to the help files of those functions. Any processing or combining of survey weights is done in the functions that read each year of data. The function <code><a href="../reference/clean_surveyweights.html">clean_surveyweights()</a></code> assigns any missing weights the average weight for each year, and standardises the weights to sum to 1 within each year. The resulting survey weight variable for each year is <code>wt_int</code>.</p>
</div>
<div id="age" class="section level1">
<h1 class="hasAnchor">
<a href="#age" class="anchor"></a>Age</h1>
<p>From 2015 onwards, the HSE no longer supplies age in single years (to prevent individual identification). For our modelling, we require age in single years, so we apply a method that randomly assigns an age in single years to individuals for who we only have an age category. The age categories we work with are: 0-1, 2-4, 5-7, 8-10, 11-12, 13-15, 16-17, 18-19, 20-24, 25-29, 30-34, 35-39, 40-44, 45-49, 50-54, 55-59, 60-64, 65-69, 70-74, 75-79, 80-84, 85-89, 90+. These categories are the finest scale version of age that is available for years 2015+. We then select only individuals younger than 90 years for our modelling.</p>
<p>This processing is done by the function <code><a href="../reference/clean_age.html">clean_age()</a></code> that calls the function <code><a href="../reference/num_sim.html">num_sim()</a></code> to simulate single years of age. For years 2015+, we also use <code><a href="../reference/num_sim.html">num_sim()</a></code> to convert the categorical variables for years since quitting smoking and years spent as a smoker to single years of age.</p>
</div>
<div id="other-demographic-variables" class="section level1">
<h1 class="hasAnchor">
<a href="#other-demographic-variables" class="anchor"></a>Other demographic variables</h1>
<p>The function <code><a href="../reference/clean_demographic.html">clean_demographic()</a></code> creates variables for ethnicity, sex and quintiles of the Index of Multiple Deprivation (IMDq).</p>
<div id="sex" class="section level2">
<h2 class="hasAnchor">
<a href="#sex" class="anchor"></a>Sex</h2>
<p>1 = Male, 2 = Female.</p>
</div>
<div id="imd-quintiles" class="section level2">
<h2 class="hasAnchor">
<a href="#imd-quintiles" class="anchor"></a>IMD quintiles</h2>
<p>5_most_deprived, 4, 3, 2, 1_least_deprived.</p>
</div>
<div id="ethnicity" class="section level2">
<h2 class="hasAnchor">
<a href="#ethnicity" class="anchor"></a>Ethnicity</h2>
<p>Previous SAPM modelling has used a simple white/non-white classification. The ONS recommend a harmonised ethnicity measure for use in social surveys (<a href="https://gss.civilservice.gov.uk/wp-content/uploads/2017/08/Ethnic-Group-June-17.pdf">ONS, 2017</a>). The use of ethnicity measures is also discussed in <a href="https://journals.sagepub.com/doi/full/10.1177/2059799116642885">Connelly et al. 2016</a>, who recommend testing the sensitivity of analyses to different specifications. We try to map the HSE categories to the ONS recommended groups for England. However, over the years, the HSE is not clear or consistent in how they have categorised chinese and arab as ‘asian’ or ‘other’. In an attempt to harmonise, we have pooled the asian and other categories.</p>
<ul>
<li>White (English, Irish, Scottish, Welsh, other European)</li>
<li>Mixed / multiple ethnic groups</li>
<li>Asian / Asian British (includes African-Indian, Indian, Pakistani, Bangladeshi), plus Other ethnic group (includes Chinese, Japanese, Philippino, Vietnamese, Arab)</li>
<li>Black / African / Caribbean / Black British (includes Caribbean, African)</li>
</ul>
<p>Following inspection of the data, the white/non-white classification does look appropriate, especially given the likely limited sample sizes - so the 2 level variable has also been created. Previous Sheffield modelling in the Sheffield Alcohol Policy Model has also used the white/non-white classification.</p>
</div>
</div>
<div id="townsend-quintiles-of-deprivation" class="section level1">
<h1 class="hasAnchor">
<a href="#townsend-quintiles-of-deprivation" class="anchor"></a>Townsend quintiles of deprivation</h1>
<p>Individuals in the HSE are not assigned a Townsend quintile of deprivation, but for a project that investigated the cost of alcohol to primary care in England, we needed to predict the Townsend quintile of each individual so that we could use it to stratify our summary of alcohol consumption.</p>
<p>The function <code><a href="../reference/use_townsend.html">use_townsend()</a></code> adds a Townsend variable to the data. It produces a version of the Health Survey for England data that has the Townsend Index in it, based on the probabilistic mapping between the 2015 English Index of Multiple Deprivation and the Townsend Index from the 2001 census.</p>
<p>It does so based on a matrix (stored in <code><a href="../reference/imdq_to_townsend.html">hseclean::imdq_to_townsend</a></code>) that maps quintiles of the Index of Multiple Deprivation onto the Townsend Index of Deprviation. To produce this we used <a href="https://census.ukdataservice.ac.uk/get-data/related/deprivation">area-level Office for National Statistics data</a> to estimate the statistical association between the two metrics of deprivation. We used estimates of the Townsend Index from 2001 Census data at Ward level, and the Index of Multiple Deprivation 2015 (IMD 2015) at Lower-layer Super Output Area (LSOA) level. First, we mapped the <a href="https://data.gov.uk/dataset/fe6e0ebc-8def-4cc6-a228-1968ccca3dd2/lower-layer-super-output-area-2001-to-ward-2001-lookup-in-england-and-wales">2001 definitions of Wards to the 2001 definitions of LSOAs</a>. Second, we mapped the <a href="https://data.gov.uk/dataset/afc2ed54-f1c5-44f3-b8bb-6454eb0153d0/lower-layer-super-output-area-2001-to-lower-layer-super-output-area-2011-to-local-authority-district-2011-lookup-in-england-and-wales">2001 definitions of LSOAs to the 2011 definitions of LSOAs that are used by the IMD 2015</a>.</p>
<div id="economic-status" class="section level2">
<h2 class="hasAnchor">
<a href="#economic-status" class="anchor"></a>Economic status</h2>
<p>The function <code><a href="../reference/clean_economic_status.html">clean_economic_status()</a></code> creates a variety of variables to classify economic status.</p>
<p>The issues around using occupation-based social classifications for social survey research are discussed by Connelly et al. <span class="citation">(<a href="#ref-Connelly2016a">2016</a>)</span>. They advise using a range of alternative measures, and not creating new measures beyond what is already established.</p>
<p>The classifications considered are:</p>
<ul>
<li>Employed / in paid work or not.</li>
<li>The <a href="https://www.ons.gov.uk/methodology/classificationsandstandards/otherclassifications/thenationalstatisticssocioeconomicclassificationnssecrebasedonsoc2010">NS-SEC measure</a> which was constructed to measure the employment relations and conditions of occupations (i.e. it classifies people based on their employment occupation). It is therefore not that good at classifying people who are not employed for various reasons.<br>
</li>
<li>The <a href="https://humanrights.brightblue.org.uk/blog-1/2016/5/6/measuring-social-class">NRS social grade system</a>. This measure is the one used in the Tobacco and Alcohol Toolkit studies, but is not reported in the Health Survey for England. We create this variable by recategorising the NS-SEC 8 level variable. This is important to facilitate the link of analysis to the Toolkit Study.<br>
</li>
<li>Manual vs. non-manual occupation. In the 2017 Tobacco control plan for England, there was a specific target to reduce the difference in rates of smoking between people classified with a manual or non-manual occupation. We create this variable from the 3 level NS-SEC classification by grouping Managerial and professional with intermediate occupations to give the non-manual group.<br>
</li>
<li>Economic status - retired / employed / unemployed.<br>
</li>
<li>Activity status for last week that adds more detail such as ‘in education’ and ‘looking after home or family’.</li>
</ul>
</div>
<div id="education" class="section level2">
<h2 class="hasAnchor">
<a href="#education" class="anchor"></a>Education</h2>
<p>The main education variable produced by the function <code><a href="../reference/clean_education.html">clean_education()</a></code> is a four category description of the age at which someone finished full-time education. The categories are:</p>
<ul>
<li>never went to school,<br>
</li>
<li>left at 15 years or younger,<br>
</li>
<li>left at 16-18,<br>
</li>
<li>left at 19 years or over.</li>
</ul>
<p>If someone was still in full time education at the time of the survey, then if they were younger than 18 years, we assumed they would leave at 16-18, and if they were older than 18 years, we assumed they would leave at 19 years or over.</p>
<p>A further education variable is also produced - which indicates whether an individual reached a degree as their top qualification or not. Here a degree is defined as an “NVQ4/NVQ5/Degree or equiv”.</p>
</div>
<div id="family" class="section level2">
<h2 class="hasAnchor">
<a href="#family" class="anchor"></a>Family</h2>
<p>The function <code><a href="../reference/clean_family.html">clean_family()</a></code> processes the data on the number of children in the household and the relationship status of each respondent.</p>
<div id="number-of-children-in-the-household" class="section level3">
<h3 class="hasAnchor">
<a href="#number-of-children-in-the-household" class="anchor"></a>Number of children in the household</h3>
<p><code>kids</code> is the number of children aged 0-15 years who live in the household. If a 3 year old lives in a household with 2 siblings, aged 6 and 8 years, then we might expect them to be recorded as living in a household with 3 children under age 15 years. The variable is created by combining the HSE data on children and infants in the household. It is categorised into: 0, 1, 2, 3+ children under age 15 years.</p>
<p>The problem with the Health Survey for England is that from 2015 onwards, the number of children in the household is not provided as this information could be identifiable (you can get it if you apply and pay for a secure dataset). Therefore, for years 2015+, the number of children in the household is completely missing and needs to be imputed.</p>
<p>We impute the number of children for years 2015+ automatically in the function <code><a href="../reference/clean_family.html">clean_family()</a></code>, based on the correlation between the number of children and a range of demographic and socioeconomic variables in 2012-2014, the last three years for which data on kids is available. This imputation is based on the fit of a multinomial model in <code>package(nnet)</code>. The model object is saved in the <code>hseclean</code> package as the object <code><a href="../reference/impute_kids_model.html">hseclean::impute_kids_model</a></code>, and is drawn upon by the <code><a href="../reference/clean_family.html">clean_family()</a></code> function to impute the data as needed. This imputation won’t work unless the required demographic and socio-economic variables have already been cleaned prior to running <code><a href="../reference/clean_family.html">clean_family()</a></code>. There will still be missing values in <code>kids</code> if there are missing values in the predictor variables required by the model. These missing values can be taken care of in a multiple imputation procedure (see vignette(missing_data)).</p>
</div>
<div id="relationship-status" class="section level3">
<h3 class="hasAnchor">
<a href="#relationship-status" class="anchor"></a>Relationship status</h3>
<p>In previous versions of modelling for the Sheffield Alcohol Policy Model, relationship status has been described as married/not-married. Here, we include more detail by using:</p>
<ul>
<li>single<br>
</li>
<li>married, civil partnership or cohabiting<br>
</li>
<li>separated, divorced, widowed</li>
</ul>
</div>
</div>
<div id="income" class="section level2">
<h2 class="hasAnchor">
<a href="#income" class="anchor"></a>Income</h2>
<p>The function <code><a href="../reference/clean_income.html">clean_income()</a></code> processes the data on income.</p>
<p>There are a few different options for classifying income - the need to have a measure that is consistent across years of the Health Survey for England has led us to use equivalised income quintiles only. (Past SAPM modelling has used years of the HSE for which a continous variable for equivalised income was provided - and calculated our own income groups - but in later years, this continuous income variable is not available.)</p>
<p>In the past SAPM modelling, a measure of in “poverty” vs. “not in poverty” has been used, where the poverty threshold is defined as 60% of the median income for any year. For years in which we only have income quintiles available, it is not possible to make an exact calculation of poverty, but being in poverty will coincide approximately with the lowest 2 income quintiles.</p>
<p>It would also be possible from the Health Survey for England to classify people as being in receipt of benefits or not, but this is not currently implemented in <code>hseclean</code>, and would have to have some thought on how to deal with the changing definitions of benefits over time.</p>
</div>
</div>
<div id="health-and-biometric-variables" class="section level1">
<h1 class="hasAnchor">
<a href="#health-and-biometric-variables" class="anchor"></a>Health and biometric variables</h1>
<p>The function <code><a href="../reference/clean_health_and_bio.html">clean_health_and_bio()</a></code> cleans data on presence/absence of certain categories of health condition, and on height and weight.</p>
<div id="health-conditions" class="section level2">
<h2 class="hasAnchor">
<a href="#health-conditions" class="anchor"></a>Health conditions</h2>
<p>There are a set of 15 categories of long-lasting illnesses (occurring for or expected to last at least 12 months) that are ascertained consistently across all years of the HSE. These are:<br>
- Cancer<br>
- Endocrine or metabolic condition<br>
- Mental health condition<br>
- Nervous system condition<br>
- Eye condition<br>
- Ear condition<br>
- Heart or circulatory system condition<br>
- Respiratory condition<br>
- Digestive condition<br>
- Genito-urinary condition<br>
- Skin condition<br>
- Musculo-skeletal condition<br>
- Infectious disease<br>
- Blood and related organs condition<br>
- Other complaints</p>
</div>
<div id="height-and-weight" class="section level2">
<h2 class="hasAnchor">
<a href="#height-and-weight" class="anchor"></a>Height and weight</h2>
<p>Height (cm) and weight (kg). Weight is estimated above 130kg. Missing values of height and weight are replaced by the mean height and weight for each age, sex and IMD quintile. BMI is calculated according to kg / m^2.</p>
</div>
</div>
<div id="references" class="section level1 unnumbered">
<h1 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h1>
<div id="refs" class="references">
<div id="ref-Connelly2016a">
<p>Connelly, Roxanne, Vernon Gayle, and Paul S. Lambert. 2016. “A Review of Occupation-Based Social Classifications for Social Survey Research.” Journal Article. <em>Methodological Innovations</em> 9. <a href="https://doi.org/10.1177/2059799116638003">https://doi.org/10.1177/2059799116638003</a>.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://www.sheffield.ac.uk/scharr/sections/heds/staff/gillespie_d">Duncan Gillespie</a>, Laura Webster, <a href="https://www.sheffield.ac.uk/scharr/sections/heds/staff/angus_c">Colin Angus</a>, <a href="https://www.sheffield.ac.uk/scharr/sections/heds/staff/brennan_a">Alan Brennan</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
