<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Health Survey Data Wrangling • hseclean</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Health Survey Data Wrangling">
<meta name="description" content="Functions to read the data, rename, organise and process the variables required, impute missing data, and summarise data.">
<meta property="og:description" content="Functions to read the data, rename, organise and process the variables required, impute missing data, and summarise data.">
<meta property="og:image" content="https://stapm.github.io/hseclean/logo.png">
<!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-167990045-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-167990045-1');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">hseclean</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.12.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="articles/hseclean.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="reference/index.html">Functions</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-methods-and-data-checks" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Methods and data checks</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-methods-and-data-checks">
<li><a class="dropdown-item" href="articles/english_hse_data_processing_methods.html">Health Survey for England methods</a></li>
    <li><a class="dropdown-item" href="articles/Scotland_alcohol_data_report.html">Scotland alcohol data</a></li>
    <li><a class="dropdown-item" href="articles/Scotland_tobacco_data_report.html">Scotland tobacco data</a></li>
    <li><a class="dropdown-item" href="articles/Scotland_alcohol_upshifting_report.html">Scotland alcohol upshifting</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/STAPM/hseclean" aria-label="View on Github"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://gitlab.com/stapm/r-packages/hseclean" aria-label="View on Gitlab"><span class="fa fab fa-gitlab fa-lg"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://stapm.gitlab.io/software.html" aria-label="Back to the STAPM software page"><span class="fa fa-code"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="health-survey-data-wrangling-">Health Survey Data Wrangling <a class="anchor" aria-label="anchor" href="#health-survey-data-wrangling-"></a>
</h1>
</div>
<!-- badges: start -->

<!-- badger::badge_doi("10.17605/OSF.IO/43N7P", "green") -->
<p><a href="https://doi.org/10.17605/OSF.IO/43N7P" class="external-link"><img src="https://img.shields.io/badge/doi-10.17605/OSF.IO/43N7P-green.svg"></a> <!-- badges: end --></p>
<div class="section level2">
<h2 id="the-sheffield-tobacco-and-alcohol-policy-modelling-platform">The Sheffield Tobacco and Alcohol Policy Modelling Platform<a class="anchor" aria-label="anchor" href="#the-sheffield-tobacco-and-alcohol-policy-modelling-platform"></a>
</h2>
<p>This R package was developed as part of the Sheffield Tobacco and Alcohol Policy Modelling <a href="https://stapm.gitlab.io/" class="external-link uri">https://stapm.gitlab.io/</a> by the <a href="https://www.sheffield.ac.uk/scharr" class="external-link">School of Health and Related Research at the University of Sheffield</a>.</p>
<p>The aim of the research programme is to identify and evaluate approaches to reducing the harm from tobacco and alcohol, with the aim of improving commissioning in a public health policy context, i.e. providing knowledge to support benefits achieved by policymakers.</p>
<p>The two objectives of the research programme are:</p>
<ul>
<li>To evaluate the health and economic effects of past trends, policy changes or interventions that have affected alcohol consumption and/or tobacco smoking</li>
<li>To appraise the health and economic outcomes of potential future trends, changes to alcohol and/or tobacco policy or new interventions</li>
</ul>
<p>The STAPM modelling is not linked to the tobacco or alcohol industry and is conducted without industry funding or influence.</p>
</div>
<div class="section level2">
<h2 id="purpose-of-making-the-code-open-source">Purpose of making the code open source<a class="anchor" aria-label="anchor" href="#purpose-of-making-the-code-open-source"></a>
</h2>
<p>The code has been made open source for the following two reasons:</p>
<ul>
<li>Transparency. Open science, allowing review and feedback to the project team on the code and methods used.</li>
<li>Methodology sharing. For people to understand the code and methods used so they might use aspects of it in their own work, e.g., because they are doing something partially related that isn’t exactly the same job and might like to ‘dip into’ elements of this code for inspiration.</li>
</ul>
</div>
<div class="section level2">
<h2 id="stage-of-testing-and-development">Stage of testing and development<a class="anchor" aria-label="anchor" href="#stage-of-testing-and-development"></a>
</h2>
<p>The code is actively being used in project work. It is being reviewed and developed all the time; more tests and checks are being added.</p>
<p>The repository is not intended to be maintained by an open source community wider than the development team.</p>
</div>
<div class="section level2">
<h2 id="data-access">Data access<a class="anchor" aria-label="anchor" href="#data-access"></a>
</h2>
<p>To be able to download data from the UK Data Service, you will need to register with the UK Data Service website, which will enable you to request access to the datasets. Instructions on how to do this can be found <a href="https://www.ukdataservice.ac.uk/get-data/how-to-access.aspx" class="external-link">here</a>.</p>
<p>In ScHARR, all data is stored and processed according to the <a href="https://www.sheffield.ac.uk/scharr/research/igov/policy00" class="external-link">ScHARR Information Governance Policy</a>. No individual-level data is included within this package.</p>
</div>
<div class="section level2">
<h2 id="data-checks">Data checks<a class="anchor" aria-label="anchor" href="#data-checks"></a>
</h2>
<p>Data checks are brief reports that show the results of survey data processing using the hseclean package.</p>
</div>
<div class="section level2">
<h2 id="code-repositories">Code repositories<a class="anchor" aria-label="anchor" href="#code-repositories"></a>
</h2>
<p>The code on Github (<a href="https://github.com/STAPM/hseclean" class="external-link uri">https://github.com/STAPM/hseclean</a>) is a mirror of the code in a private Gitlab repository where the actual development takes place (<a href="https://gitlab.com/stapm/r-packages/hseclean" class="external-link uri">https://gitlab.com/stapm/r-packages/hseclean</a>). The code in the Github repository is linked to a repository on the Open Science Framework, which provides the doi for the package citation (<a href="https://osf.io/43n7p/" class="external-link uri">https://osf.io/43n7p/</a>).</p>
</div>
<div class="section level2">
<h2 id="citation">Citation<a class="anchor" aria-label="anchor" href="#citation"></a>
</h2>
<p>Gillespie D, Webster L, Leeming G, Morris D, Angus C, Brennan A ([YEAR]). hseclean: An R Package for Health Survey Data Wrangling. R package version [x.x.x]. University of Sheffield. <a href="https://stapm.github.io/hseclean/" class="uri">https://stapm.github.io/hseclean/</a>. doi: <a href="https://doi.org/10.17605/OSF.IO/43N7P" class="external-link uri">https://doi.org/10.17605/OSF.IO/43N7P</a></p>
</div>
<div class="section level2">
<h2 id="motivation-for-developing-the-r-package">Motivation for developing the R package<a class="anchor" aria-label="anchor" href="#motivation-for-developing-the-r-package"></a>
</h2>
<p>The motivation for <code>hseclean</code> was to standardised the way that health survey data were cleaned and prepared for our analyses and inputs to the STAPM decision-analytic model. The data are annual surveys covering health and health-related behaviours for England and Scotland. The suite of functions within <code>hseclean</code> reads the data for each year, renames, organises and processes the variables including multiple imputation and basic data summaries.</p>
<p><code>hseclean</code> was created as part of a programme of work on the health economics of tobacco and alcohol at the School of Health and Related Research (ScHARR), The University of Sheffield. This programme is based around the construction of the Sheffield Tobacco and Alcohol Policy Model (STAPM), which aims to use comparable methodologies to evaluate the impacts of tobacco and alcohol policies.</p>
<p>We have subsequently added functions to process the Scottish Health Survey (SHeS) into a form that matches our processing of the Health Survey for England.</p>
</div>
<div class="section level2">
<h2 id="functionality">Functionality<a class="anchor" aria-label="anchor" href="#functionality"></a>
</h2>
<p>hseclean works with data from annual surveys covering health and health-related behaviours for England and Scotland. It does not function without this data. However no datasets are provisioned. The code is designed to work with the tab delimited versions of the data downloaded from the <a href="https://ukdataservice.ac.uk/" class="external-link">UK Data Service</a>.</p>
<p>The package is primarily designed for users at the University of Sheffield, working off the university’s networked drives. This is where most of the testing has taken place so there might be unexpected issues out of that environment.</p>
<p>What the software does in general and how it relates to data is documented in the vignettes under “Technical Documentation”.</p>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<p><code>hseclean</code> is a package for reading and cleaning the Health Survey for England and Scottish Health Survey data.</p>
<p>The <strong>inputs</strong> are the tab delimited survey data files for each year.</p>
<p>The <strong>processes</strong> applied by the functions in <code>hseclean</code> give options to:</p>
<ol style="list-style-type: decimal">
<li>Read tobacco and alcohol related variables and the information on individual characteristics that we use in our analyses.<br>
</li>
<li>Clean alcohol consumption data, applying assumptions about beverage size and alcohol content.<br>
</li>
<li>Clean data on current smoking and smoking history.<br>
</li>
<li>Clean data on individual characteristics including age, sex, ethnicity, economic status, family, health and income.<br>
</li>
<li>Multiply impute missing data.<br>
</li>
<li>Summarise categorical variables using proportions, considering survey design.</li>
</ol>
<p>The <strong>output</strong> of these processes is a cleaned dataset that is ready for further analysis. This dataset can be saved so that you don’t need to run the cleaning processes in <code>hseclean</code> each time you want to use the cleaned data.</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p><code>hseclean</code> is publicly available via Github.</p>
<p>By default the user should install the latest tagged version of the package. Otherwise, if you want to reproduce project work and know the version of the package used, install that version.</p>
<p>If on a University of Sheffield managed computer, install the R, RStudio and Rtools bundle from the Software Centre. Install Rtools - using the <a href="https://cran.r-project.org/web/packages/installr/index.html" class="external-link">installr</a> package can make this easier. Then install the latest or a specified version of <code>hseclean</code> from Github with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#install.packages("devtools")</span></span>
<span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_git.html" class="external-link">install_git</a></span><span class="op">(</span></span>
<span>  <span class="st">"https://github.com/stapm/hseclean.git"</span>, </span>
<span>  ref <span class="op">=</span> <span class="st">"x.x.x"</span>,</span>
<span>  build_vignettes <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># ref = "x.x.x" is the version to install - change to the version you want e.g. "1.2.3"</span></span></code></pre></div>
<p>Or clone the package repo locally and use the ‘install and restart’ button in the Build tab of RStudio. This option is more convenient when testing development versions.</p>
<p>Then load the package, and some other packages that are useful. Note that the code within <code>hseclean</code> uses the <code><a href="https://rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table::data.table()</a></code> syntax.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load the package</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://stapm.github.io/hseclean/">hseclean</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Other useful packages</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span> <span class="co"># for data manipulation and summary</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org" class="external-link">magrittr</a></span><span class="op">)</span> <span class="co"># for pipes</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span> <span class="co"># for plotting</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://stapm.gitlab.io/Health_Survey_for_England.html" class="external-link">Health Survey for England</a></li>
<li><a href="https://stapm.gitlab.io/Scottish_Health_Survey.html" class="external-link">Scottish Health Survey</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>AGPL (&gt;= 3)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing hseclean</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="https://www.sheffield.ac.uk/scharr/people/staff/duncan-gillespie" class="external-link">Duncan Gillespie</a> <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0003-3450-5747" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Laura Webster <br><small class="roles"> Author </small>  </li>
<li>Grace Leeming <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0003-4836-7840" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Ryan KL Chen <br><small class="roles"> Author </small>  </li>
<li>
<a href="https://www.sheffield.ac.uk/scharr/people/staff/damon-morris" class="external-link">Damon Morris</a> <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0001-6757-5333" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>
<a href="https://www.sheffield.ac.uk/scharr/people/staff/colin-angus" class="external-link">Colin Angus</a> <br><small class="roles"> Author </small>  </li>
<li>
<a href="https://www.sheffield.ac.uk/scharr/people/staff/alan-brennan" class="external-link">Alan Brennan</a> <br><small class="roles"> Author </small>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://www.repostatus.org/#active" class="external-link"><img src="https://www.repostatus.org/badges/latest/active.svg" alt="Project Status: Active – The project has reached a stable, usable state and is being actively developed."></a></li>
<li><a href="https://www.tidyverse.org/lifecycle/#stable" class="external-link"><img src="https://img.shields.io/badge/lifecycle-stable-brightgreen.svg" alt="Lifecycle: stable"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://www.sheffield.ac.uk/scharr/people/staff/duncan-gillespie" class="external-link">Duncan Gillespie</a>, Laura Webster, Grace Leeming, Ryan KL Chen, <a href="https://www.sheffield.ac.uk/scharr/people/staff/damon-morris" class="external-link">Damon Morris</a>, <a href="https://www.sheffield.ac.uk/scharr/people/staff/colin-angus" class="external-link">Colin Angus</a>, <a href="https://www.sheffield.ac.uk/scharr/people/staff/alan-brennan" class="external-link">Alan Brennan</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
